/**
 * @license knockout-arraytransforms 0.6.0 (https://github.com/mwiencek/knockout-arraytransforms)
 * Released under the X11 License; see the LICENSE file in the official code repository.
 */
!function(e){"undefined"!=typeof module&&void 0!==module.exports?module.exports=e(require("knockout")):"function"==typeof define&&define.amd?define(["knockout"],e):e(window.ko)}(function(e){function r(r){for(var n,s=this.mappedItems,u=i(),d=0,p=0,l=0;n=r[l];l++){var f=n.status;if("retained"!==f){var v=n.index,h=n.moved,c=n.value,m=void 0!==h,y=null;if(d=Math.min(d,v),"added"===f){var b=h+p;m?(y=u[v],y||(y=u[v]=s[b],s[b]=null)):(y=i(),y.index=e.observable(v),y.index.isDifferent=a,y.value=c,o(this,y)),s.splice(v,0,y),this.valueAdded(c,v,y.mappedValue,y,m),p++}else if("deleted"===f){var b=v+p;m?y=u[h]||(u[h]=s[b]):(y=s[b],y.computed&&y.computed.dispose()),s.splice(b,1),this.valueDeleted(c,b,y.mappedValue,y,m),p--}}}for(var y,l=d,g=s.length;g>l;l++)s[l].index(l);t(this)}function t(e){var r=e.transformedArray;if(r){var t=y(e.previousArray,r,{sparse:!0});if(t.length){e.previousArray=r.concat();var i=e.original,n=i.notifySubscribers,a=i.peek().concat(),s=!1;i.notifySubscribers=function(e,r){"arrayChange"===r?s=!0:n.apply(i,arguments)},e.transform.notifySubscribers(r),e.transform.notifySubscribers(t,m),i.notifySubscribers=n,s&&(t=y(a,i.peek(),{sparse:!0}),t.length&&i.notifySubscribers(t,"arrayChange"))}}}function i(){return Object.create?Object.create(null):{}}function n(e,r){return e===r}function a(e,r){return e!==r}function s(e,r){for(var t=0,i=e.length;i>t;t++)if(e[t]===r)return t;return-1}function o(r,t){var i=r.callback;if(void 0===i)return void(t.mappedValue=t.value);var a=r,s="callback";if("function"!=typeof i){if(a=t.value,s=i,i=a[s],"function"!=typeof i)return void(t.mappedValue=i);if(e.isObservable(i))return void u(r,t,i)}var o=e.computed(function(){return a[s](t.value,t.index)});return o.isActive()?(o.equalityComparer=n,u(r,t,o),t.computed=o,o):void(t.mappedValue=o.peek())}function u(e,r,i){r.mappedValue=i.peek(),i.subscribe(function(i){e.valueMutated(r.value,i,r.mappedValue,r),r.mappedValue=i,t(e)})}function d(e){this.applyChanges(e)}function p(r,t,i,n){r.original=t,r.mappedItems=[],r.callback=i;var a=r.init(n);r.transform=a,e.isObservable(a)&&a.cacheDiffForKnownOperation&&(e.version>="3.3.0"?(a.beforeSubscriptionAdd=e.observableArray.fn.beforeSubscriptionAdd,a.afterSubscriptionRemove=e.observableArray.fn.afterSubscriptionRemove):a.subscribe=e.observableArray.fn.subscribe,r.transformedArray=a.peek(),r.previousArray=r.transformedArray.concat())}function l(t){function i(e,r,t){p(this,e,r,t)}i.prototype.applyChanges=r,e.utils.extend(i.prototype,t),c[t.name]=i,e.observableArray.fn[t.name]=function(e,r){var t=new i(this,e,r),n=this.peek(),a=[];this.subscribe(d,t,m);for(var s=0,o=n.length;o>s;s++)a.push({status:"added",value:n[s],index:s});return t.applyChanges(a),t.transform}}function f(e,r,t,i){var n,a=0;return i>0&&(n=r[i-1],a=n[t]||0,e.getVisibility(n.mappedValue)&&a++),a}function v(e){return!e}function h(e){return e+""===this.groupKey}var c=i(),m="arrayChange",y=e.utils.compareArrays,b=1;l({name:"sortBy",init:function(){return this.keyCounts=i(),this.sortedItems=[],e.observableArray([])},valueAdded:function(e,r,t,i,n){var a=this.sortedIndexOf(t,e,i),o=this.sortedItems;if(n){var u=s(o,i);u>=0&&(i.previousMappedIndex=u)}var d=this.keyCounts;o.splice(a,0,i),d[t]=(d[t]||0)+1,this.transformedArray.splice(a,0,e);for(var p=b++,l=a,f=o.length;f>l;l++)i=o[l],i.seen!==p&&void 0!==i.previousMappedIndex&&i.previousMappedIndex>=a&&++i.previousMappedIndex,i.seen=p},valueDeleted:function(e,r,t,i,n){var a,o=this.sortedItems;n&&void 0!==i.previousMappedIndex?(a=i.previousMappedIndex,delete i.previousMappedIndex):a=s(o,i),o.splice(a,1),this.keyCounts[t]--,this.transformedArray.splice(a,1);for(var u=b++,d=a,p=o.length;p>d;d++)i=o[d],i.seen!==u&&void 0!==i.previousMappedIndex&&i.previousMappedIndex>a&&--i.previousMappedIndex,i.seen=u},valueMutated:function(e,r,t,i){var n=this.keyCounts,a=s(this.sortedItems,i),o=this.sortedIndexOf(r,e,i);if(n[t]--,n[r]=(n[r]||0)+1,o>a&&o--,a!==o){var u=this.transformedArray,d=this.sortedItems;d.splice(a,1),d.splice(o,0,i),u.splice(a,1),u.splice(o,0,e)}},sortedIndexOf:function(e,r,t){var i=this.sortedItems,n=i.length;if(!n)return 0;for(var a,s=0,o=n-1;o>=s;)if(a=s+o>>1,e>i[a].mappedValue)s=a+1;else if((o=a)===s)break;var u=this.keyCounts[e],d=0;if(u)for(var p,l=this.mappedItems,f=0;n>f;f++)if(p=l[f]){if(p===t)break;if(p.mappedValue===e&&d++,d===u)break}return s+d}});var g={mappedIndexProp:"mappedIndex",init:function(){return e.observableArray([])},valueAdded:function(e,r,t,i){t=this.getVisibility(t);var n=this.mappedItems,a=this.mappedIndexProp;if(t)for(var s,o=r+1,u=n.length;u>o;o++)(s=n[o])&&s[a]++;var d=f(this,n,a,r);t&&this.transformedArray.splice(d,0,e),i[a]=d},valueDeleted:function(e,r,t,i){if(this.getVisibility(t)){var n=this.mappedItems,a=this.mappedIndexProp,s=f(this,n,a,r);n[r]===i&&r++;for(var o,u=r,d=n.length;d>u;u++)(o=n[u])&&o[a]--;this.transformedArray.splice(s,1)}},valueMutated:function(e,r,t,i){var n=s(this.mappedItems,i);this.valueAdded(e,n,r,i),this.valueDeleted(e,n,t,i)}};l(e.utils.extend({name:"filter",getVisibility:Boolean},g)),l(e.utils.extend({name:"reject",getVisibility:v},g)),l({name:"groupBy",init:function(){return this.groups=i(),e.observableArray([])},applyChanges:function(e){var i=this.groups;r.call(this,e);var n=!1;for(key in i)t(i[key]),i[key].transformedArray.length||(this.deleteGroup(key),n=!0);n&&t(this)},valueAdded:function(e,r,t,n){t+="";var a=this.groups;if(!a[t]){var s=new c.filter(this.original);a[t]=s,s.groupKey=t,s.mappedItems=this.mappedItems,s.mappedIndexProp="mappedIndex."+t,s.getVisibility=h;var o=i();o.key=t,o.values=s.transform,this.transformedArray.push(o)}for(var u in a)a[u].valueAdded(e,r,t,n)},valueDeleted:function(e,r,t,i){var n=this.groups;for(var a in n)n[a].valueDeleted(e,r,t,i)},valueMutated:function(e,r,i,n){var a,o=this.groups,u=s(this.mappedItems,n);this.valueDeleted(e,u,i,n),this.valueAdded(e,u,r,n);for(var d in o)a=o[d],t(a),a.transformedArray.length||this.deleteGroup(d)},deleteGroup:function(e){var r=this.transformedArray;delete this.groups[e];for(var t=0,i=r.length;i>t;t++)if(r[t].key===e)return r.splice(t,1)}}),l({name:"map",init:function(){return e.observableArray([])},valueAdded:function(e,r,t){this.transformedArray.splice(r,0,t)},valueDeleted:function(e,r){this.transformedArray.splice(r,1)},valueMutated:function(e,r,t,i){this.transformedArray[s(this.mappedItems,i)]=r}});var A={init:function(){return this.truthinessCount=0,e.observable(this.getTruthiness())},valueAdded:function(e,r,t){this.valueMutated(null,t,!1)},valueDeleted:function(e,r,t){this.valueMutated(null,!1,t)},valueMutated:function(e,r,t){r&&!t?this.truthinessCount++:t&&!r&&this.truthinessCount--,this.transform(this.getTruthiness())}};return l(e.utils.extend({name:"any",getTruthiness:function(){return this.truthinessCount>0}},A)),l(e.utils.extend({name:"all",getTruthiness:function(){return this.truthinessCount===this.mappedItems.length}},A)),e.observableArray.fn.some=e.observableArray.fn.any,e.observableArray.fn.every=e.observableArray.fn.all,e.arraytransforms={makeTransform:l},e.arrayTransforms=e.arraytransforms,e.arraytransforms});